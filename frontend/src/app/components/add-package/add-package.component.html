<div class="container py-3">
  <div class="row justify-content-center">
    <div class="col-md-11 col-lg-9 col-xl-8">
      <div class="bg-white shadow rounded p-3">
        <h2 class="mb-3 border-bottom pb-2 text-primary fs-4">
          {{ isEditMode ? 'Edit Package' : 'Create New Package' }}
        </h2>

        <!-- Loading bar -->
        <div *ngIf="submitting" class="progress mb-3" style="height: 5px;">
          <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" style="width: 100%;"></div>
        </div>

        <!-- Message pop box -->
        <div *ngIf="message" 
             class="position-fixed top-0 start-50 translate-middle-x mt-3 p-3 rounded shadow"
             [ngClass]="{'bg-success text-white': messageType === 'success', 'bg-danger text-white': messageType === 'error'}"
             style="z-index: 1050; min-width: 250px; max-width: 90vw; text-align: center;">
          {{ message }}
        </div>

        <form [formGroup]="packageForm" (ngSubmit)="submit()" novalidate>
          <!-- Basic Information -->
          <div class="mb-3">
            <h5 class="text-primary mb-2 fs-6">Package Information</h5>
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="text" class="form-control form-control-sm" formControlName="name" placeholder="Name" />
                  <label>Name</label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="text" class="form-control form-control-sm" formControlName="type" placeholder="Type" />
                  <label>Type</label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="text" class="form-control form-control-sm" formControlName="destination" placeholder="Destination" />
                  <label>Destination</label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="text" class="form-control form-control-sm" formControlName="country" placeholder="Country" />
                  <label>Country</label>
                </div>
              </div>
            </div>
          </div>

          <!-- Travel Details -->
          <div class="mb-3">
            <h5 class="text-primary mb-2 fs-6">Travel Details</h5>
            <div class="row g-3">
              <div class="col-md-4">
                <div class="form-floating">
                  <input type="number" class="form-control form-control-sm" formControlName="price" placeholder="Price" />
                  <label>Price (â‚¹)</label>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-floating">
                  <input type="number" class="form-control form-control-sm" formControlName="duration_days" placeholder="Duration" />
                  <label>Duration (days)</label>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-floating">
                  <input type="date" class="form-control form-control-sm" formControlName="start_date" placeholder="Start Date" />
                  <label>Start Date</label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="number" class="form-control form-control-sm" formControlName="total_slots" placeholder="Total Slots" />
                  <label>Total Slots</label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="number" class="form-control form-control-sm" formControlName="available_slots" placeholder="Available Slots" />
                  <label>Available Slots</label>
                </div>
              </div>
              <div class="col-12">
                <label class="form-label small mt-1">Description</label>
                <textarea rows="2" class="form-control form-control-sm" formControlName="description" placeholder="Package description..."></textarea>
              </div>
            </div>
          </div>

          <!-- Images -->
          <div class="mb-3">
            <h5 class="text-primary mb-2 fs-6">Image URLs</h5>
            <div class="row g-3">
              <div class="col-md-4">
                <div class="form-floating">
                  <input type="text" class="form-control form-control-sm" formControlName="image_url1" placeholder="Image URL 1" />
                  <label>Image URL 1</label>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-floating">
                  <input type="text" class="form-control form-control-sm" formControlName="image_url2" placeholder="Image URL 2" />
                  <label>Image URL 2</label>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-floating">
                  <input type="text" class="form-control form-control-sm" formControlName="image_url3" placeholder="Image URL 3" />
                  <label>Image URL 3</label>
                </div>
              </div>
            </div>
          </div>

          <!-- Submit -->
          <div class="mt-3 d-flex justify-content-end">
            <button
              type="submit"
              class="btn btn-primary px-4"
              [disabled]="submitting || packageForm.invalid"
            >
              {{ submitting ? (isEditMode ? 'Updating...' : 'Saving...') : (isEditMode ? 'Update Package' : 'Add Package') }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
